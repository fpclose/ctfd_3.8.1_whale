# FRP Server 配置模板
# 版本: 0.52.3
# 用途: 在宿主机上运行的 FRP Server

[common]
# 绑定地址（通常不需要修改）
bind_addr = 0.0.0.0

# 主端口（FRP Client 连接端口）
# CHANGE_ME: 可修改为其他端口，需同步修改 frpc.ini
bind_port = 7897

# 认证令牌（重要！必须与 frpc.ini 中的一致）
# CHANGE_ME: 生产环境请使用强密码
# 生成方法: openssl rand -hex 16
token = your_secure_token_here

# HTTP 虚拟主机端口（用于 HTTP 类型的题目）
# 访问格式: http://<subdomain>.<subdomain_host>:<vhost_http_port>
vhost_http_port = 8080

# 子域名后缀
# 本地测试: 使用 xip.io 或 nip.io (自动解析到 IP)
#   示例: 127.0.0.1.xip.io, 192.168.1.100.nip.io
# 生产环境: 使用你自己的域名
#   示例: ctf.example.com (需配置泛域名解析 *.ctf.example.com)
# CHANGE_ME: 修改为你的服务器 IP 或域名
subdomain_host = 127.0.0.1.xip.io

# ========== 可选配置 ==========

# FRP Dashboard（Web 管理界面）
# 访问: http://your_ip:7500
# CHANGE_ME: 修改默认密码
dashboard_port = 7500
dashboard_user = admin
dashboard_pwd = admin

# 日志配置
log_file = /usr/local/frp/frps.log
log_level = info
log_max_days = 3

# 心跳配置
heartbeat_timeout = 90

# 允许的端口范围（Direct 类型题目）
# 建议设置，防止端口冲突
# allow_ports = 10000-10100

# TCP 多路复用（提高性能）
tcp_mux = true

# 最大连接池大小
max_pool_count = 50

# 认证超时
authentication_timeout = 900

# ========== HTTPS 支持（可选） ==========

# 如需支持 HTTPS 虚拟主机，取消注释以下配置
# vhost_https_port = 443

# ========== TLS 加密（可选） ==========

# 启用 TLS 加密传输
# tls_enable = true

# 示例配置说明:
# 
# 1. 本地测试环境（使用 xip.io）
#    bind_port = 7897
#    token = test_token_123
#    vhost_http_port = 8080
#    subdomain_host = 192.168.1.100.xip.io
#    
#    访问格式: http://<uuid>.192.168.1.100.xip.io:8080
# 
# 2. 生产环境（使用自己的域名）
#    bind_port = 7897
#    token = <strong_random_token>
#    vhost_http_port = 80
#    subdomain_host = ctf.example.com
#    
#    需要配置 DNS 泛域名解析: *.ctf.example.com -> your_server_ip
#    访问格式: http://<uuid>.ctf.example.com
# 
# 3. Direct 类型题目（不使用 HTTP 虚拟主机）
#    只需配置 bind_port 和 token
#    题目直接通过 IP:端口访问
#    访问格式: http://your_ip:10001 或 nc your_ip 10001

# 安全建议:
# 1. 使用强密码作为 token
# 2. 修改 Dashboard 默认密码
# 3. 配置防火墙，只开放必要端口
# 4. 定期检查日志文件
# 5. 生产环境启用 TLS 加密

